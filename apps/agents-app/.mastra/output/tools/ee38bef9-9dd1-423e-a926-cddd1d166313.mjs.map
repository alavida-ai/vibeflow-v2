{"version":3,"file":"ee38bef9-9dd1-423e-a926-cddd1d166313.mjs","sources":["../../../src/mastra/tools/workflows/start-workflow.ts"],"sourcesContent":["import { createTool } from \"@mastra/core\";\nimport { z } from \"zod\";\nimport { startWorkflow } from \"@brand-listener/agent-sdk\";\n\nexport const startWorkflowTool = createTool({\n  id: \"start-workflow\",\n  description: \"Start a workflow and return the first suspend payload (first task). Only one workflow can be active per session.\",\n  inputSchema: z.object({\n    workflowId: z.string(),\n    inputData: z.record(z.any()).optional()\n  }),\n  outputSchema: z.object({\n    runId: z.string().optional(),\n    stepName: z.string().optional(),\n    suspendPayload: z.any().optional(),\n    status: z.enum([\"success\", \"suspended\", \"error\"]),\n    message: z.string().optional(),\n    result: z.any().optional()\n  }),\n  execute: async ({ context, runtimeContext }) => {\n    try {\n      const { workflowId } = context;\n      \n      const result = await startWorkflow(workflowId);\n      runtimeContext.set(\"current-run-id\", result.runId);\n      runtimeContext.set(\"workflowId\", workflowId);\n      return result;\n    } catch (error) {\n      return {\n        status: \"error\" as const,\n        message: `Failed to start workflow: ${error instanceof Error ? error.message : String(error)}`\n      };\n    }\n  }\n});"],"names":[],"mappings":";;;;;AAIO,MAAM,oBAAoB,UAAA,CAAW;AAAA,EAC1C,EAAA,EAAI,gBAAA;AAAA,EACJ,WAAA,EAAa,kHAAA;AAAA,EACb,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,UAAA,EAAY,EAAE,MAAA,EAAO;AAAA,IACrB,WAAW,CAAA,CAAE,MAAA,CAAO,EAAE,GAAA,EAAK,EAAE,QAAA;AAAS,GACvC,CAAA;AAAA,EACD,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,KAAA,EAAO,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC3B,QAAA,EAAU,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC9B,cAAA,EAAgB,CAAA,CAAE,GAAA,EAAI,CAAE,QAAA,EAAS;AAAA,IACjC,QAAQ,CAAA,CAAE,IAAA,CAAK,CAAC,SAAA,EAAW,WAAA,EAAa,OAAO,CAAC,CAAA;AAAA,IAChD,OAAA,EAAS,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC7B,MAAA,EAAQ,CAAA,CAAE,GAAA,EAAI,CAAE,QAAA;AAAS,GAC1B,CAAA;AAAA,EACD,OAAA,EAAS,OAAO,EAAE,OAAA,EAAS,gBAAe,KAAM;AAC9C,IAAA,IAAI;AACF,MAAA,MAAM,EAAE,YAAW,GAAI,OAAA;AAEvB,MAAA,MAAM,MAAA,GAAS,MAAM,aAAA,CAAc,UAAU,CAAA;AAC7C,MAAA,cAAA,CAAe,GAAA,CAAI,gBAAA,EAAkB,MAAA,CAAO,KAAK,CAAA;AACjD,MAAA,cAAA,CAAe,GAAA,CAAI,cAAc,UAAU,CAAA;AAC3C,MAAA,OAAO,MAAA;AAAA,IACT,SAAS,KAAA,EAAO;AACd,MAAA,OAAO;AAAA,QACL,MAAA,EAAQ,OAAA;AAAA,QACR,OAAA,EAAS,6BAA6B,KAAA,YAAiB,KAAA,GAAQ,MAAM,OAAA,GAAU,MAAA,CAAO,KAAK,CAAC,CAAA;AAAA,OAC9F;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;;"}